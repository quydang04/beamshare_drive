import { defineComponent as T, shallowRef as y, inject as B, computed as z, toRaw as E, onMounted as P, watch as d, onBeforeUnmount as V, h as W } from "vue";
import { basicSetup as R } from "../../../../codemirror@6.0.1_@lezer_common@1.2.1/node_modules/codemirror/dist/index.mjs";
import { EditorState as g, StateEffect as A, Compartment as I } from "../../../../@codemirror_state@6.4.1/node_modules/@codemirror/state/dist/index.mjs";
import { EditorView as h, keymap as M, placeholder as k } from "../../../../@codemirror_view@6.33.0/node_modules/@codemirror/view/dist/index.mjs";
import { indentWithTab as L } from "../../../../@codemirror_commands@6.6.1/node_modules/@codemirror/commands/dist/index.mjs";
import { indentUnit as N } from "../../../../@codemirror_language@6.10.2/node_modules/@codemirror/language/dist/index.mjs";
/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/
var G = Object.freeze({ autofocus: !1, disabled: !1, indentWithTab: !0, tabSize: 2, placeholder: "", autoDestroy: !0, extensions: [R] }), _ = Symbol("vue-codemirror-global-config"), a, $ = function(t) {
  var r = t.onUpdate, c = t.onChange, m = t.onFocus, f = t.onBlur, s = function(n, l) {
    var o = {};
    for (var e in n) Object.prototype.hasOwnProperty.call(n, e) && l.indexOf(e) < 0 && (o[e] = n[e]);
    if (n != null && typeof Object.getOwnPropertySymbols == "function") {
      var i = 0;
      for (e = Object.getOwnPropertySymbols(n); i < e.length; i++) l.indexOf(e[i]) < 0 && Object.prototype.propertyIsEnumerable.call(n, e[i]) && (o[e[i]] = n[e[i]]);
    }
    return o;
  }(t, ["onUpdate", "onChange", "onFocus", "onBlur"]);
  return g.create({ doc: s.doc, selection: s.selection, extensions: (Array.isArray(s.extensions) ? s.extensions : [s.extensions]).concat([h.updateListener.of(function(n) {
    r(n), n.docChanged && c(n.state.doc.toString(), n), n.focusChanged && (n.view.hasFocus ? m(n) : f(n));
  })]) });
}, v = function(t) {
  var r = new I();
  return { compartment: r, run: function(c) {
    r.get(t.state) ? t.dispatch({ effects: r.reconfigure(c) }) : t.dispatch({ effects: A.appendConfig.of(r.of(c)) });
  } };
}, O = function(t, r) {
  var c = v(t), m = c.compartment, f = c.run;
  return function(s) {
    var n = m.get(t.state);
    f(s ?? n !== r ? r : []);
  };
}, b = { type: Boolean, default: void 0 }, q = { autofocus: b, disabled: b, indentWithTab: b, tabSize: Number, placeholder: String, style: Object, autoDestroy: b, phrases: Object, root: Object, extensions: Array, selection: Object }, H = { modelValue: { type: String, default: "" } }, J = Object.assign(Object.assign({}, q), H);
(function(t) {
  t.Change = "change", t.Update = "update", t.Focus = "focus", t.Blur = "blur", t.Ready = "ready", t.ModelUpdate = "update:modelValue";
})(a || (a = {}));
var p = {};
p[a.Change] = function(t, r) {
  return !0;
}, p[a.Update] = function(t) {
  return !0;
}, p[a.Focus] = function(t) {
  return !0;
}, p[a.Blur] = function(t) {
  return !0;
}, p[a.Ready] = function(t) {
  return !0;
};
var j = {};
j[a.ModelUpdate] = p[a.Change];
var K = Object.assign(Object.assign({}, p), j), Q = T({ name: "VueCodemirror", props: Object.assign({}, J), emits: Object.assign({}, K), setup: function(t, r) {
  var c = y(), m = y(), f = y(), s = Object.assign(Object.assign({}, G), B(_, {})), n = z(function() {
    var l = {};
    return Object.keys(E(t)).forEach(function(o) {
      var e;
      o !== "modelValue" && (l[o] = (e = t[o]) !== null && e !== void 0 ? e : s[o]);
    }), l;
  });
  return P(function() {
    var l;
    m.value = $({ doc: t.modelValue, selection: n.value.selection, extensions: (l = s.extensions) !== null && l !== void 0 ? l : [], onFocus: function(e) {
      return r.emit(a.Focus, e);
    }, onBlur: function(e) {
      return r.emit(a.Blur, e);
    }, onUpdate: function(e) {
      return r.emit(a.Update, e);
    }, onChange: function(e, i) {
      e !== t.modelValue && (r.emit(a.Change, e, i), r.emit(a.ModelUpdate, e, i));
    } }), f.value = function(e) {
      return new h(Object.assign({}, e));
    }({ state: m.value, parent: c.value, root: n.value.root });
    var o = function(e) {
      var i = function() {
        return e.state.doc.toString();
      }, S = v(e).run, C = O(e, [h.editable.of(!1), g.readOnly.of(!0)]), x = O(e, M.of([L])), U = v(e).run, w = v(e).run, D = v(e).run, F = v(e).run;
      return { focus: function() {
        return e.focus();
      }, getDoc: i, setDoc: function(u) {
        u !== i() && e.dispatch({ changes: { from: 0, to: e.state.doc.length, insert: u } });
      }, reExtensions: S, toggleDisabled: C, toggleIndentWithTab: x, setTabSize: function(u) {
        U([g.tabSize.of(u), N.of(" ".repeat(u))]);
      }, setPhrases: function(u) {
        w([g.phrases.of(u)]);
      }, setPlaceholder: function(u) {
        D(k(u));
      }, setStyle: function(u) {
        u === void 0 && (u = {}), F(h.theme({ "&": Object.assign({}, u) }));
      } };
    }(f.value);
    d(function() {
      return t.modelValue;
    }, function(e) {
      e !== o.getDoc() && o.setDoc(e);
    }), d(function() {
      return t.extensions;
    }, function(e) {
      return o.reExtensions(e || []);
    }, { immediate: !0 }), d(function() {
      return n.value.disabled;
    }, function(e) {
      return o.toggleDisabled(e);
    }, { immediate: !0 }), d(function() {
      return n.value.indentWithTab;
    }, function(e) {
      return o.toggleIndentWithTab(e);
    }, { immediate: !0 }), d(function() {
      return n.value.tabSize;
    }, function(e) {
      return o.setTabSize(e);
    }, { immediate: !0 }), d(function() {
      return n.value.phrases;
    }, function(e) {
      return o.setPhrases(e || {});
    }, { immediate: !0 }), d(function() {
      return n.value.placeholder;
    }, function(e) {
      return o.setPlaceholder(e);
    }, { immediate: !0 }), d(function() {
      return n.value.style;
    }, function(e) {
      return o.setStyle(e);
    }, { immediate: !0 }), n.value.autofocus && o.focus(), r.emit(a.Ready, { state: m.value, view: f.value, container: c.value });
  }), V(function() {
    n.value.autoDestroy && f.value && function(l) {
      l.destroy();
    }(f.value);
  }), function() {
    return W("div", { class: "v-codemirror", style: { display: "contents" }, ref: c });
  };
} }), oe = Q;
export {
  oe as Codemirror,
  G as DEFAULT_CONFIG
};
//# sourceMappingURL=vue-codemirror.esm.mjs.map

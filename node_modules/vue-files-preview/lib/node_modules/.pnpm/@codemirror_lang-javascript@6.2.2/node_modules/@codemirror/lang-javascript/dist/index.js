"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const N=require("../../../../../@lezer_javascript@1.4.17/node_modules/@lezer/javascript/dist/index.js"),r=require("../../../../../@codemirror_language@6.10.2/node_modules/@codemirror/language/dist/index.js"),P=require("../../../../../@codemirror_state@6.4.1/node_modules/@codemirror/state/dist/index.js"),O=require("../../../../../@codemirror_view@6.33.0/node_modules/@codemirror/view/dist/index.js"),a=require("../../../../../@codemirror_autocomplete@6.18.1_@codemirror_language@6.10.2_@codemirror_state@6.4.1_@codemirr_vumhapdsayoq2s6tgtur5g4bra/node_modules/@codemirror/autocomplete/dist/index.js"),T=require("../../../../../@lezer_common@1.2.1/node_modules/@lezer/common/dist/index.js"),$=[a.snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),a.snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),a.snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),a.snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),a.snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),a.snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),a.snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),a.snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),a.snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),a.snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),a.snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],I=$.concat([a.snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),a.snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),a.snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),h=new T.NodeWeakMap,x=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function f(e){return(t,i)=>{let n=t.node.getChild("VariableDefinition");return n&&i(n,e),!0}}const V=["FunctionDeclaration"],q={FunctionDeclaration:f("function"),ClassDeclaration:f("class"),ClassExpression:()=>!0,EnumDeclaration:f("constant"),TypeAliasDeclaration:f("type"),NamespaceDeclaration:f("namespace"),VariableDefinition(e,t){e.matchContext(V)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function v(e,t){let i=h.get(t);if(i)return i;let n=[],s=!0;function g(o,p){let u=e.sliceString(o.from,o.to);n.push({label:u,type:p})}return t.cursor(T.IterMode.IncludeAnonymous).iterate(o=>{if(s)s=!1;else if(o.name){let p=q[o.name];if(p&&p(o,g)||x.has(o.name))return!1}else if(o.to-o.from>8192){for(let p of v(e,o.node))n.push(p);return!1}}),h.set(t,n),n}const k=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,J=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function X(e){let t=r.syntaxTree(e.state).resolveInner(e.pos,-1);if(J.indexOf(t.name)>-1)return null;let i=t.name=="VariableName"||t.to-t.from<20&&k.test(e.state.sliceDoc(t.from,t.to));if(!i&&!e.explicit)return null;let n=[];for(let s=t;s;s=s.parent)x.has(s.name)&&(n=n.concat(v(e.state.doc,s)));return{options:n,from:i?t.from:e.pos,validFor:k}}const d=r.LRLanguage.define({name:"javascript",parser:N.parser.configure({props:[r.indentNodeProp.add({IfStatement:r.continuedIndent({except:/^\s*({|else\b)/}),TryStatement:r.continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:r.flatIndent,SwitchBody:e=>{let t=e.textAfter,i=/^\s*\}/.test(t),n=/^\s*(case|default)\b/.test(t);return e.baseIndent+(i?0:n?1:2)*e.unit},Block:r.delimitedIndent({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":r.continuedIndent({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),r.foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":r.foldInside,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),D={test:e=>/^JSX/.test(e.name),facet:r.defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},j=d.configure({dialect:"ts"},"typescript"),L=d.configure({dialect:"jsx",props:[r.sublanguageProp.add(e=>e.isTop?[D]:void 0)]}),E=d.configure({dialect:"jsx ts",props:[r.sublanguageProp.add(e=>e.isTop?[D]:void 0)]},"typescript");let A=e=>({label:e,type:"keyword"});const B="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(A),M=B.concat(["declare","implements","private","protected","public"].map(A));function _(e={}){let t=e.jsx?e.typescript?E:L:e.typescript?j:d,i=e.typescript?I.concat(M):$.concat(B);return new r.LanguageSupport(t,[d.data.of({autocomplete:a.ifNotIn(J,a.completeFromList(i))}),d.data.of({autocomplete:X}),e.jsx?F:[]])}function R(e){for(;;){if(e.name=="JSXOpenTag"||e.name=="JSXSelfClosingTag"||e.name=="JSXFragmentTag")return e;if(e.name=="JSXEscape"||!e.parent)return null;e=e.parent}}function w(e,t,i=e.length){for(let n=t==null?void 0:t.firstChild;n;n=n.nextSibling)if(n.name=="JSXIdentifier"||n.name=="JSXBuiltin"||n.name=="JSXNamespacedName"||n.name=="JSXMemberExpression")return e.sliceString(n.from,Math.min(n.to,i));return""}const W=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),F=O.EditorView.inputHandler.of((e,t,i,n,s)=>{if((W?e.composing:e.compositionStarted)||e.state.readOnly||t!=i||n!=">"&&n!="/"||!d.isActiveAt(e.state,t,-1))return!1;let g=s(),{state:o}=g,p=o.changeByRange(u=>{var b;let{head:l}=u,c=r.syntaxTree(o).resolveInner(l-1,-1),y;if(c.name=="JSXStartTag"&&(c=c.parent),!(o.doc.sliceString(l-1,l)!=n||c.name=="JSXAttributeValue"&&c.to>l)){if(n==">"&&c.name=="JSXFragmentTag")return{range:u,changes:{from:l,insert:"</>"}};if(n=="/"&&c.name=="JSXStartCloseTag"){let m=c.parent,S=m.parent;if(S&&m.from==l-2&&((y=w(o.doc,S.firstChild,l))||((b=S.firstChild)===null||b===void 0?void 0:b.name)=="JSXFragmentTag")){let C=`${y}>`;return{range:P.EditorSelection.cursor(l+C.length,-1),changes:{from:l,insert:C}}}}else if(n==">"){let m=R(c);if(m&&m.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(o.doc.sliceString(l,l+2))&&(y=w(o.doc,m,l)))return{range:u,changes:{from:l,insert:`</${y}>`}}}}return{range:u}});return p.changes.empty?!1:(e.dispatch([g,o.update(p,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});exports.autoCloseTags=F;exports.javascript=_;exports.javascriptLanguage=d;exports.jsxLanguage=L;exports.localCompletionSource=X;exports.snippets=$;exports.tsxLanguage=E;exports.typescriptLanguage=j;exports.typescriptSnippets=I;
//# sourceMappingURL=index.js.map

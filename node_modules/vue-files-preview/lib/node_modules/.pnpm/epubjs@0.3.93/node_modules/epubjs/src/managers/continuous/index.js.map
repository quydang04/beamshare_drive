{"version":3,"file":"index.js","sources":["../../../../../../../../../../node_modules/.pnpm/epubjs@0.3.93/node_modules/epubjs/src/managers/continuous/index.js"],"sourcesContent":["import {extend, defer, requestAnimationFrame} from \"../../utils/core\";\nimport DefaultViewManager from \"../default\";\nimport Snap from \"../helpers/snap\";\nimport { EVENTS } from \"../../utils/constants\";\nimport debounce from \"lodash/debounce\";\n\nclass ContinuousViewManager extends DefaultViewManager {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis.name = \"continuous\";\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\tinfinite: true,\n\t\t\toverflow: undefined,\n\t\t\taxis: undefined,\n\t\t\twritingMode: undefined,\n\t\t\tflow: \"scrolled\",\n\t\t\toffset: 500,\n\t\t\toffsetDelta: 250,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\tsnap: false,\n\t\t\tafterScrolledTimeout: 10,\n\t\t\tallowScriptedContent: false,\n\t\t\tallowPopups: false\n\t\t});\n\n\t\textend(this.settings, options.settings || {});\n\n\t\t// Gap can be 0, but defaults doesn't handle that\n\t\tif (options.settings.gap != \"undefined\" && options.settings.gap === 0) {\n\t\t\tthis.settings.gap = options.settings.gap;\n\t\t}\n\n\t\tthis.viewSettings = {\n\t\t\tignoreClass: this.settings.ignoreClass,\n\t\t\taxis: this.settings.axis,\n\t\t\tflow: this.settings.flow,\n\t\t\tlayout: this.layout,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tforceEvenPages: false,\n\t\t\tallowScriptedContent: this.settings.allowScriptedContent,\n\t\t\tallowPopups: this.settings.allowPopups\n\t\t};\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\n\tdisplay(section, target){\n\t\treturn DefaultViewManager.prototype.display.call(this, section, target)\n\t\t\t.then(function () {\n\t\t\t\treturn this.fill();\n\t\t\t}.bind(this));\n\t}\n\n\tfill(_full){\n\t\tvar full = _full || new defer();\n\n\t\tthis.q.enqueue(() => {\n\t\t\treturn this.check();\n\t\t}).then((result) => {\n\t\t\tif (result) {\n\t\t\t\tthis.fill(full);\n\t\t\t} else {\n\t\t\t\tfull.resolve();\n\t\t\t}\n\t\t});\n\n\t\treturn full.promise;\n\t}\n\n\tmoveTo(offset){\n\t\t// var bounds = this.stage.bounds();\n\t\t// var dist = Math.floor(offset.top / bounds.height) * bounds.height;\n\t\tvar distX = 0,\n\t\t\t\tdistY = 0;\n\n\t\tvar offsetX = 0,\n\t\t\t\toffsetY = 0;\n\n\t\tif(!this.isPaginated) {\n\t\t\tdistY = offset.top;\n\t\t\toffsetY = offset.top+this.settings.offsetDelta;\n\t\t} else {\n\t\t\tdistX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\t\t\toffsetX = distX+this.settings.offsetDelta;\n\t\t}\n\n\t\tif (distX > 0 || distY > 0) {\n\t\t\tthis.scrollBy(distX, distY, true);\n\t\t}\n\t}\n\n\tafterResized(view){\n\t\tthis.emit(EVENTS.MANAGERS.RESIZE, view.section);\n\t}\n\n\t// Remove Previous Listeners if present\n\tremoveShownListeners(view){\n\n\t\t// view.off(\"shown\", this.afterDisplayed);\n\t\t// view.off(\"shown\", this.afterDisplayedAbove);\n\t\tview.onDisplayed = function(){};\n\n\t}\n\n\tadd(section){\n\t\tvar view = this.createView(section);\n\n\t\tthis.views.append(view);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.WRITING_MODE, (mode) => {\n\t\t\tthis.updateWritingMode(mode);\n\t\t});\n\n\t\t// view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\treturn view.display(this.request);\n\t}\n\n\tappend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.WRITING_MODE, (mode) => {\n\t\t\tthis.updateWritingMode(mode);\n\t\t});\n\n\t\tthis.views.append(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\n\t\treturn view;\n\t}\n\n\tprepend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tthis.counter(bounds);\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.WRITING_MODE, (mode) => {\n\t\t\tthis.updateWritingMode(mode);\n\t\t});\n\n\t\tthis.views.prepend(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\n\t\treturn view;\n\t}\n\n\tcounter(bounds){\n\t\tif(this.settings.axis === \"vertical\") {\n\t\t\tthis.scrollBy(0, bounds.heightDelta, true);\n\t\t} else {\n\t\t\tthis.scrollBy(bounds.widthDelta, 0, true);\n\t\t}\n\t}\n\n\tupdate(_offset){\n\t\tvar container = this.bounds();\n\t\tvar views = this.views.all();\n\t\tvar viewsLength = views.length;\n\t\tvar visible = [];\n\t\tvar offset = typeof _offset != \"undefined\" ? _offset : (this.settings.offset || 0);\n\t\tvar isVisible;\n\t\tvar view;\n\n\t\tvar updating = new defer();\n\t\tvar promises = [];\n\t\tfor (var i = 0; i < viewsLength; i++) {\n\t\t\tview = views[i];\n\n\t\t\tisVisible = this.isVisible(view, offset, offset, container);\n\n\t\t\tif(isVisible === true) {\n\t\t\t\t// console.log(\"visible \" + view.index, view.displayed);\n\n\t\t\t\tif (!view.displayed) {\n\t\t\t\t\tlet displayed = view.display(this.request)\n\t\t\t\t\t\t.then(function (view) {\n\t\t\t\t\t\t\tview.show();\n\t\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\t\tview.hide();\n\t\t\t\t\t\t});\n\t\t\t\t\tpromises.push(displayed);\n\t\t\t\t} else {\n\t\t\t\t\tview.show();\n\t\t\t\t}\n\t\t\t\tvisible.push(view);\n\t\t\t} else {\n\t\t\t\tthis.q.enqueue(view.destroy.bind(view));\n\t\t\t\t// console.log(\"hidden \" + view.index, view.displayed);\n\n\t\t\t\tclearTimeout(this.trimTimeout);\n\t\t\t\tthis.trimTimeout = setTimeout(function(){\n\t\t\t\t\tthis.q.enqueue(this.trim.bind(this));\n\t\t\t\t}.bind(this), 250);\n\t\t\t}\n\n\t\t}\n\n\t\tif(promises.length){\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tupdating.reject(err);\n\t\t\t\t});\n\t\t} else {\n\t\t\tupdating.resolve();\n\t\t\treturn updating.promise;\n\t\t}\n\n\t}\n\n\tcheck(_offsetLeft, _offsetTop){\n\t\tvar checking = new defer();\n\t\tvar newViews = [];\n\n\t\tvar horizontal = (this.settings.axis === \"horizontal\");\n\t\tvar delta = this.settings.offset || 0;\n\n\t\tif (_offsetLeft && horizontal) {\n\t\t\tdelta = _offsetLeft;\n\t\t}\n\n\t\tif (_offsetTop && !horizontal) {\n\t\t\tdelta = _offsetTop;\n\t\t}\n\n\t\tvar bounds = this._bounds; // bounds saved this until resize\n\n\t\tlet offset = horizontal ? this.scrollLeft : this.scrollTop;\n\t\tlet visibleLength = horizontal ? Math.floor(bounds.width) : bounds.height;\n\t\tlet contentLength = horizontal ? this.container.scrollWidth : this.container.scrollHeight;\n\t\tlet writingMode = (this.writingMode && this.writingMode.indexOf(\"vertical\") === 0) ? \"vertical\" : \"horizontal\";\n\t\tlet rtlScrollType = this.settings.rtlScrollType;\n\t\tlet rtl = this.settings.direction === \"rtl\";\n\n\t\tif (!this.settings.fullsize) {\n\t\t\t// Scroll offset starts at width of element\n\t\t\tif (rtl && rtlScrollType === \"default\" && writingMode === \"horizontal\") {\n\t\t\t\toffset = contentLength - visibleLength - offset;\n\t\t\t}\n\t\t\t// Scroll offset starts at 0 and goes negative\n\t\t\tif (rtl && rtlScrollType === \"negative\" && writingMode === \"horizontal\") {\n\t\t\t\toffset = offset * -1;\n\t\t\t}\n\t\t} else {\n\t\t\t// Scroll offset starts at 0 and goes negative\n\t\t\tif ((horizontal && rtl && rtlScrollType === \"negative\") ||\n\t\t\t\t(!horizontal && rtl && rtlScrollType === \"default\")) {\n\t\t\t\toffset = offset * -1;\n\t\t\t}\n\t\t}\n\n\t\tlet prepend = () => {\n\t\t\tlet first = this.views.first();\n\t\t\tlet prev = first && first.section.prev();\n\n\t\t\tif(prev) {\n\t\t\t\tnewViews.push(this.prepend(prev));\n\t\t\t}\n\t\t};\n\n\t\tlet append = () => {\n\t\t\tlet last = this.views.last();\n\t\t\tlet next = last && last.section.next();\n\n\t\t\tif(next) {\n\t\t\t\tnewViews.push(this.append(next));\n\t\t\t}\n\n\t\t};\n\n\t\tlet end = offset + visibleLength + delta;\n\t\tlet start = offset - delta;\n\n\t\tif (end >= contentLength) {\n\t\t\tappend();\n\t\t}\n\t\t\n\t\tif (start < 0) {\n\t\t\tprepend();\n\t\t}\n\t\t\n\n\t\tlet promises = newViews.map((view) => {\n\t\t\treturn view.display(this.request);\n\t\t});\n\n\t\tif(newViews.length){\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.then(() => {\n\t\t\t\t\treturn this.check();\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\t// Check to see if anything new is on screen after rendering\n\t\t\t\t\treturn this.update(delta);\n\t\t\t\t}, (err) => {\n\t\t\t\t\treturn err;\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.q.enqueue(function(){\n\t\t\t\tthis.update();\n\t\t\t}.bind(this));\n\t\t\tchecking.resolve(false);\n\t\t\treturn checking.promise;\n\t\t}\n\n\n\t}\n\n\ttrim(){\n\t\tvar task = new defer();\n\t\tvar displayed = this.views.displayed();\n\t\tvar first = displayed[0];\n\t\tvar last = displayed[displayed.length-1];\n\t\tvar firstIndex = this.views.indexOf(first);\n\t\tvar lastIndex = this.views.indexOf(last);\n\t\tvar above = this.views.slice(0, firstIndex);\n\t\tvar below = this.views.slice(lastIndex+1);\n\n\t\t// Erase all but last above\n\t\tfor (var i = 0; i < above.length-1; i++) {\n\t\t\tthis.erase(above[i], above);\n\t\t}\n\n\t\t// Erase all except first below\n\t\tfor (var j = 1; j < below.length; j++) {\n\t\t\tthis.erase(below[j]);\n\t\t}\n\n\t\ttask.resolve();\n\t\treturn task.promise;\n\t}\n\n\terase(view, above){ //Trim\n\n\t\tvar prevTop;\n\t\tvar prevLeft;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tprevTop = this.container.scrollTop;\n\t\t\tprevLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tprevTop = window.scrollY;\n\t\t\tprevLeft = window.scrollX;\n\t\t}\n\n\t\tvar bounds = view.bounds();\n\n\t\tthis.views.remove(view);\n\t\t\n\t\tif(above) {\n\t\t\tif (this.settings.axis === \"vertical\") {\n\t\t\t\tthis.scrollTo(0, prevTop - bounds.height, true);\n\t\t\t} else {\n\t\t\t\tif(this.settings.direction === 'rtl') {\n\t\t\t\t\tif (!this.settings.fullsize) {\n\t\t\t\t\t\tthis.scrollTo(prevLeft, 0, true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.scrollTo(prevLeft + Math.floor(bounds.width), 0, true);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.scrollTo(prevLeft - Math.floor(bounds.width), 0, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\taddEventListeners(stage){\n\n\t\twindow.addEventListener(\"unload\", function(e){\n\t\t\tthis.ignore = true;\n\t\t\t// this.scrollTo(0,0);\n\t\t\tthis.destroy();\n\t\t}.bind(this));\n\n\t\tthis.addScrollListeners();\n\n\t\tif (this.isPaginated && this.settings.snap) {\n\t\t\tthis.snapper = new Snap(this, this.settings.snap && (typeof this.settings.snap === \"object\") && this.settings.snap);\n\t\t}\n\t}\n\n\taddScrollListeners() {\n\t\tvar scroller;\n\n\t\tthis.tick = requestAnimationFrame;\n\n\t\tlet dir = this.settings.direction === \"rtl\" && this.settings.rtlScrollType === \"default\" ? -1 : 1;\n\n\t\tthis.scrollDeltaVert = 0;\n\t\tthis.scrollDeltaHorz = 0;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t\tthis.scrollTop = window.scrollY * dir;\n\t\t\tthis.scrollLeft = window.scrollX * dir;\n\t\t}\n\n\t\tthis._onScroll = this.onScroll.bind(this);\n\t\tscroller.addEventListener(\"scroll\", this._onScroll);\n\t\tthis._scrolled = debounce(this.scrolled.bind(this), 30);\n\t\t// this.tick.call(window, this.onScroll.bind(this));\n\n\t\tthis.didScroll = false;\n\n\t}\n\n\tremoveEventListeners(){\n\t\tvar scroller;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tscroller.removeEventListener(\"scroll\", this._onScroll);\n\t\tthis._onScroll = undefined;\n\t}\n\n\tonScroll(){\n\t\tlet scrollTop;\n\t\tlet scrollLeft;\n\t\tlet dir = this.settings.direction === \"rtl\" && this.settings.rtlScrollType === \"default\" ? -1 : 1;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscrollTop = this.container.scrollTop;\n\t\t\tscrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscrollTop = window.scrollY * dir;\n\t\t\tscrollLeft = window.scrollX * dir;\n\t\t}\n\n\t\tthis.scrollTop = scrollTop;\n\t\tthis.scrollLeft = scrollLeft;\n\n\t\tif(!this.ignore) {\n\n\t\t\tthis._scrolled();\n\n\t\t} else {\n\t\t\tthis.ignore = false;\n\t\t}\n\n\t\tthis.scrollDeltaVert += Math.abs(scrollTop-this.prevScrollTop);\n\t\tthis.scrollDeltaHorz += Math.abs(scrollLeft-this.prevScrollLeft);\n\n\t\tthis.prevScrollTop = scrollTop;\n\t\tthis.prevScrollLeft = scrollLeft;\n\n\t\tclearTimeout(this.scrollTimeout);\n\t\tthis.scrollTimeout = setTimeout(function(){\n\t\t\tthis.scrollDeltaVert = 0;\n\t\t\tthis.scrollDeltaHorz = 0;\n\t\t}.bind(this), 150);\n\n\t\tclearTimeout(this.afterScrolled);\n\n\t\tthis.didScroll = false;\n\n\t}\n\n\tscrolled() {\n\n\t\tthis.q.enqueue(function() {\n\t\t\treturn this.check();\n\t\t}.bind(this));\n\n\t\tthis.emit(EVENTS.MANAGERS.SCROLL, {\n\t\t\ttop: this.scrollTop,\n\t\t\tleft: this.scrollLeft\n\t\t});\n\n\t\tclearTimeout(this.afterScrolled);\n\t\tthis.afterScrolled = setTimeout(function () {\n\n\t\t\t// Don't report scroll if we are about the snap\n\t\t\tif (this.snapper && this.snapper.supportsTouch && this.snapper.needsSnap()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.emit(EVENTS.MANAGERS.SCROLLED, {\n\t\t\t\ttop: this.scrollTop,\n\t\t\t\tleft: this.scrollLeft\n\t\t\t});\n\n\t\t}.bind(this), this.settings.afterScrolledTimeout);\n\t}\n\n\tnext(){\n\n\t\tlet delta = this.layout.props.name === \"pre-paginated\" &&\n\t\t\t\t\t\t\t\tthis.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n\t\t\tthis.scrollBy(delta, 0, true);\n\n\t\t} else {\n\n\t\t\tthis.scrollBy(0, this.layout.height, true);\n\n\t\t}\n\n\t\tthis.q.enqueue(function() {\n\t\t\treturn this.check();\n\t\t}.bind(this));\n\t}\n\n\tprev(){\n\n\t\tlet delta = this.layout.props.name === \"pre-paginated\" &&\n\t\t\t\t\t\t\t\tthis.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n\t\t\tthis.scrollBy(-delta, 0, true);\n\n\t\t} else {\n\n\t\t\tthis.scrollBy(0, -this.layout.height, true);\n\n\t\t}\n\n\t\tthis.q.enqueue(function() {\n\t\t\treturn this.check();\n\t\t}.bind(this));\n\t}\n\n\tupdateFlow(flow){\n\t\tif (this.rendered && this.snapper) {\n\t\t\tthis.snapper.destroy();\n\t\t\tthis.snapper = undefined;\n\t\t}\n\n\t\tsuper.updateFlow(flow, \"scroll\");\n\n\t\tif (this.rendered && this.isPaginated && this.settings.snap) {\n\t\t\tthis.snapper = new Snap(this, this.settings.snap && (typeof this.settings.snap === \"object\") && this.settings.snap);\n\t\t}\n\t}\n\n\tdestroy(){\n\t\tsuper.destroy();\n\n\t\tif (this.snapper) {\n\t\t\tthis.snapper.destroy();\n\t\t}\n\t}\n\n}\n\nexport default ContinuousViewManager;\n"],"names":["ContinuousViewManager","DefaultViewManager","options","extend","section","target","_full","full","defer","result","offset","distX","distY","view","EVENTS","bounds","axis","mode","_offset","container","views","viewsLength","isVisible","updating","promises","i","displayed","err","_offsetLeft","_offsetTop","checking","newViews","horizontal","delta","visibleLength","contentLength","writingMode","rtlScrollType","rtl","prepend","first","prev","append","last","next","end","start","task","firstIndex","lastIndex","above","below","j","prevTop","prevLeft","stage","Snap","scroller","requestAnimationFrame","dir","debounce","scrollTop","scrollLeft","flow"],"mappings":"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","x_google_ignoreList":[0]}
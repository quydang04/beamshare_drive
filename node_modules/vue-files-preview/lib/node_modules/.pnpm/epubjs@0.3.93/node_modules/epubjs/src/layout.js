"use strict";const c=require("./utils/core.js"),u=require("./utils/constants.js"),w=require("../../../../event-emitter@0.3.5/node_modules/event-emitter/index.js");class p{constructor(i){this.settings=i,this.name=i.layout||"reflowable",this._spread=i.spread!=="none",this._minSpreadWidth=i.minSpreadWidth||800,this._evenSpreads=i.evenSpreads||!1,i.flow==="scrolled"||i.flow==="scrolled-continuous"||i.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(i){return typeof i<"u"&&(i==="scrolled"||i==="scrolled-continuous"||i==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(i,t){return i&&(this._spread=i!=="none",this.update({spread:this._spread})),t>=0&&(this._minSpreadWidth=t),this._spread}calculate(i,t,s){var e=1,a=s||0,h=i,f=t,l=Math.floor(h/12),d,o,r,n;this._spread&&h>=this._minSpreadWidth?e=2:e=1,this.name==="reflowable"&&this._flow==="paginated"&&!(s>=0)&&(a=l%2===0?l:l-1),this.name==="pre-paginated"&&(a=0),e>1?(d=h/e-a,r=d+a):(d=h,r=h),this.name==="pre-paginated"&&e>1&&(h=d),o=d*e+a,n=h,this.width=h,this.height=f,this.spreadWidth=o,this.pageWidth=r,this.delta=n,this.columnWidth=d,this.gap=a,this.divisor=e,this.update({width:h,height:f,spreadWidth:o,pageWidth:r,delta:n,columnWidth:d,gap:a,divisor:e})}format(i,t,s){var e;return this.name==="pre-paginated"?e=i.fit(this.columnWidth,this.height,t):this._flow==="paginated"?e=i.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):s&&s==="horizontal"?e=i.size(null,this.height):e=i.size(this.width,null),e}count(i,t){let s,e;return this.name==="pre-paginated"?(s=1,e=1):this._flow==="paginated"?(t=t||this.delta,s=Math.ceil(i/t),e=s*this.divisor):(t=t||this.height,s=Math.ceil(i/t),e=s),{spreads:s,pages:e}}update(i){if(Object.keys(i).forEach(t=>{this.props[t]===i[t]&&delete i[t]}),Object.keys(i).length>0){let t=c.extend(this.props,i);this.emit(u.EVENTS.LAYOUT.UPDATED,t,i)}}}w(p.prototype);module.exports=p;
//# sourceMappingURL=layout.js.map

"use strict";const r=require("./core.js");class u{constructor(e){this._q=[],this.context=e,this.tick=r.requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var e,s,t,i=[].shift.call(arguments),n=arguments;if(!i)throw new Error("No Task Provided");return typeof i=="function"?(e=new r.defer,s=e.promise,t={task:i,args:n,deferred:e,promise:s}):t={promise:i},this._q.push(t),this.paused==!1&&!this.running&&this.run(),t.promise}dequeue(){var e,s,t;if(this._q.length&&!this.paused){if(e=this._q.shift(),s=e.task,s)return t=s.apply(this.context,e.args),t&&typeof t.then=="function"?t.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,t),e.promise);if(e.promise)return e.promise}else return e=new r.defer,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new r.defer),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}module.exports=u;
//# sourceMappingURL=queue.js.map

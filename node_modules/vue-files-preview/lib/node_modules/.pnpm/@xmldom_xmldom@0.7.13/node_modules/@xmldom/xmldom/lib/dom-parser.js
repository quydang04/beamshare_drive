"use strict";const m=require("../../../../../../../_virtual/dom-parser.js");require("./conventions.js");require("./dom.js");require("./entities.js");require("./sax.js");const _=require("../../../../../../../_virtual/entities.js"),M=require("../../../../../../../_virtual/conventions.js"),N=require("../../../../../../../_virtual/dom.js"),y=require("../../../../../../../_virtual/sax.js");var b=M.__exports,h=N.__exports,v=_.__exports,g=y.__exports,T=h.DOMImplementation,E=b.NAMESPACE,S=g.ParseError,A=g.XMLReader;function x(t){this.options=t||{locator:{}}}x.prototype.parseFromString=function(t,n){var r=this.options,e=new A,i=r.domBuilder||new f,a=r.errorHandler,c=r.locator,o=r.xmlns||{},s=/\/x?html?$/.test(n),l=s?v.HTML_ENTITIES:v.XML_ENTITIES;return c&&i.setDocumentLocator(c),e.errorHandler=L(a,i,c),e.domBuilder=r.domBuilder||i,s&&(o[""]=E.HTML),o.xml=o.xml||E.XML,t&&typeof t=="string"?e.parse(t,o,l):e.errorHandler.error("invalid doc source"),i.doc};function L(t,n,r){if(!t){if(n instanceof f)return n;t=n}var e={},i=t instanceof Function;r=r||{};function a(c){var o=t[c];!o&&i&&(o=t.length==2?function(s){t(c,s)}:t),e[c]=o&&function(s){o("[xmldom "+c+"]	"+s+p(r))}||function(){}}return a("warning"),a("error"),a("fatalError"),e}function f(){this.cdata=!1}function u(t,n){n.lineNumber=t.lineNumber,n.columnNumber=t.columnNumber}f.prototype={startDocument:function(){this.doc=new T().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,n,r,e){var i=this.doc,a=i.createElementNS(t,r||n),c=e.length;d(this,a),this.currentElement=a,this.locator&&u(this.locator,a);for(var o=0;o<c;o++){var t=e.getURI(o),s=e.getValue(o),r=e.getQName(o),l=i.createAttributeNS(t,r);this.locator&&u(e.getLocator(o),l),l.value=l.nodeValue=s,a.setAttributeNode(l)}},endElement:function(t,n,r){var e=this.currentElement;e.tagName,this.currentElement=e.parentNode},startPrefixMapping:function(t,n){},endPrefixMapping:function(t){},processingInstruction:function(t,n){var r=this.doc.createProcessingInstruction(t,n);this.locator&&u(this.locator,r),d(this,r)},ignorableWhitespace:function(t,n,r){},characters:function(t,n,r){if(t=D.apply(this,arguments),t){if(this.cdata)var e=this.doc.createCDATASection(t);else var e=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(e):/^\s*$/.test(t)&&this.doc.appendChild(e),this.locator&&u(this.locator,e)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,n,r){t=D.apply(this,arguments);var e=this.doc.createComment(t);this.locator&&u(this.locator,e),d(this,e)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,n,r){var e=this.doc.implementation;if(e&&e.createDocumentType){var i=e.createDocumentType(t,n,r);this.locator&&u(this.locator,i),d(this,i),this.doc.doctype=i}},warning:function(t){console.warn("[xmldom warning]	"+t,p(this.locator))},error:function(t){console.error("[xmldom error]	"+t,p(this.locator))},fatalError:function(t){throw new S(t,this.locator)}};function p(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function D(t,n,r){return typeof t=="string"?t.substr(n,r):t.length>=n+r||n?new java.lang.String(t,n,r)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){f.prototype[t]=function(){return null}});function d(t,n){t.currentElement?t.currentElement.appendChild(n):t.doc.appendChild(n)}m.__exports.__DOMHandler=f;m.__exports.DOMParser=x;m.__exports.DOMImplementation=h.DOMImplementation;m.__exports.XMLSerializer=h.XMLSerializer;module.exports=m.__exports;
//# sourceMappingURL=dom-parser.js.map

{"version":3,"file":"sax.js","sources":["../../../../../../../../../node_modules/.pnpm/@xmldom+xmldom@0.7.13/node_modules/@xmldom/xmldom/lib/sax.js"],"sourcesContent":["var NAMESPACE = require(\"./conventions\").NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring\nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError(message, locator) {\n\tthis.message = message\n\tthis.locator = locator\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name\n\nfunction XMLReader(){\n\n}\n\nXMLReader.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n}\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif(k in entityMap){\n\t\t\treturn entityMap[k];\n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else{\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\n\tvar locator = domBuilder.locator;\n\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor(var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else{\n\t\t        \tparseStack.push(config)\n\t\t        }\n\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\n\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else{\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e)\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else{\n\t\t\t//TODO: 这里有可能sax回退，有位置错误风险\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (el.attributeNames.hasOwnProperty(qname)) {\n\t\t\terrorHandler.fatalError('Attribute ' + qname + ' redefined')\n\t\t}\n\t\tel.addValue(qname, value, startIndex)\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else{\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start)\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else{\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\t//console.log(attrName,value,start,p)\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\t//console.dir(el)\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END\n\t\t\t}else{\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tel.closed = true;\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1)\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value.replace(/&#?\\w+;/g,entityReplacer), start)\n\t\t\t\t}else{\n\t\t\t\t\tif(!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start)\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else{//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tvar tagName =  el.tagName;\n\t\t\t\t\tif (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\n\t\t}else{\n\t\t\tlocalName = qName;\n\t\t\tprefix = null\n\t\t\tnsPrefix = qName === 'xmlns' && ''\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {}\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value)\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || '']\n\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else{\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\n\t\tif(pos<elStartEnd){//忘记闭合\n\t\t\tpos = source.lastIndexOf('</'+tagName)\n\t\t}\n\t\tcloseMap[tagName] =pos\n\t}\n\treturn pos<elStartEnd;\n\t//}\n}\n\nfunction _copy (source, target) {\n\tfor (var n in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2)\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else{\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else{\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA()\n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId)\n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1]\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tvar len = match[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else{//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {}\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n}\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;\n"],"names":["NAMESPACE","require$$0","nameStartChar","nameChar","tagNamePattern","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","ParseError","message","locator","XMLReader","source","defaultNSMap","entityMap","domBuilder","_copy","parse","defaultNSMapCopy","errorHandler","fixedFromCharCode","code","surrogate1","surrogate2","entityReplacer","a","k","appendText","end","start","xt","position","p","lineEnd","linePattern","lineStart","parseStack","closeMap","tagStart","doc","text","tagName","config","localNSMap","endMatch","endIgnoreCaseMach","prefix","parseInstruction","parseDCC","el","ElementAttributes","currentNSMap","parseElementStartPart","len","fixSelfClosed","locator2","copyLocator","i","appendElement","parseHtmlSpecialContent","e","f","t","addAttribute","qname","value","startIndex","attrName","s","c","qName","nsp","localName","nsPrefix","ns","elStartEnd","elEndStart","pos","target","n","next","matchs","split","name","pubid","sysid","lastMatch","match","offset","buf","reg","sax"],"mappings":"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","x_google_ignoreList":[0]}
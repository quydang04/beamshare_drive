"use strict";const h=require("../common/utils.js");function C(r,b){let i,u,p,e,d,n,s,l,f="";const x=r.pos,o=r.posMax;if(r.src.charCodeAt(r.pos)!==33||r.src.charCodeAt(r.pos+1)!==91)return!1;const k=r.pos+2,c=r.md.helpers.parseLinkLabel(r,r.pos+1,!1);if(c<0)return!1;if(e=c+1,e<o&&r.src.charCodeAt(e)===40){for(e++;e<o&&(i=r.src.charCodeAt(e),!(!h.isSpace(i)&&i!==10));e++);if(e>=o)return!1;for(l=e,n=r.md.helpers.parseLinkDestination(r.src,e,r.posMax),n.ok&&(f=r.md.normalizeLink(n.str),r.md.validateLink(f)?e=n.pos:f=""),l=e;e<o&&(i=r.src.charCodeAt(e),!(!h.isSpace(i)&&i!==10));e++);if(n=r.md.helpers.parseLinkTitle(r.src,e,r.posMax),e<o&&l!==e&&n.ok)for(s=n.str,e=n.pos;e<o&&(i=r.src.charCodeAt(e),!(!h.isSpace(i)&&i!==10));e++);else s="";if(e>=o||r.src.charCodeAt(e)!==41)return r.pos=x,!1;e++}else{if(typeof r.env.references>"u")return!1;if(e<o&&r.src.charCodeAt(e)===91?(l=e+1,e=r.md.helpers.parseLinkLabel(r,e),e>=0?p=r.src.slice(l,e++):e=c+1):e=c+1,p||(p=r.src.slice(k,c)),d=r.env.references[h.normalizeReference(p)],!d)return r.pos=x,!1;f=d.href,s=d.title}if(!b){u=r.src.slice(k,c);const a=[];r.md.inline.parse(u,r.md,r.env,a);const m=r.push("image","img",0),A=[["src",f],["alt",""]];m.attrs=A,m.children=a,m.content=u,s&&A.push(["title",s])}return r.pos=e,r.posMax=o,!0}module.exports=C;
//# sourceMappingURL=image.js.map

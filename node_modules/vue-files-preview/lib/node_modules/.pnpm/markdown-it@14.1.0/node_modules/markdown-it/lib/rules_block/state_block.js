"use strict";const C=require("../token.js"),k=require("../common/utils.js");function l(n,t,s,e){this.src=n,this.md=t,this.env=s,this.tokens=e,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const u=this.src;for(let o=0,r=0,h=0,i=0,f=u.length,a=!1;r<f;r++){const c=u.charCodeAt(r);if(!a)if(k.isSpace(c)){h++,c===9?i+=4-i%4:i++;continue}else a=!0;(c===10||r===f-1)&&(c!==10&&r++,this.bMarks.push(o),this.eMarks.push(r),this.tShift.push(h),this.sCount.push(i),this.bsCount.push(0),a=!1,h=0,i=0,o=r+1)}this.bMarks.push(u.length),this.eMarks.push(u.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}l.prototype.push=function(n,t,s){const e=new C(n,t,s);return e.block=!0,s<0&&this.level--,e.level=this.level,s>0&&this.level++,this.tokens.push(e),e};l.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};l.prototype.skipEmptyLines=function(t){for(let s=this.lineMax;t<s&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};l.prototype.skipSpaces=function(t){for(let s=this.src.length;t<s;t++){const e=this.src.charCodeAt(t);if(!k.isSpace(e))break}return t};l.prototype.skipSpacesBack=function(t,s){if(t<=s)return t;for(;t>s;)if(!k.isSpace(this.src.charCodeAt(--t)))return t+1;return t};l.prototype.skipChars=function(t,s){for(let e=this.src.length;t<e&&this.src.charCodeAt(t)===s;t++);return t};l.prototype.skipCharsBack=function(t,s,e){if(t<=e)return t;for(;t>e;)if(s!==this.src.charCodeAt(--t))return t+1;return t};l.prototype.getLines=function(t,s,e,u){if(t>=s)return"";const o=new Array(s-t);for(let r=0,h=t;h<s;h++,r++){let i=0;const f=this.bMarks[h];let a=f,c;for(h+1<s||u?c=this.eMarks[h]+1:c=this.eMarks[h];a<c&&i<e;){const p=this.src.charCodeAt(a);if(k.isSpace(p))p===9?i+=4-(i+this.bsCount[h])%4:i++;else if(a-f<this.tShift[h])i++;else break;a++}i>e?o[r]=new Array(i-e+1).join(" ")+this.src.slice(a,c):o[r]=this.src.slice(a,c)}return o.join("")};l.prototype.Token=C;module.exports=l;
//# sourceMappingURL=state_block.js.map

"use strict";const u=require("./common/utils.js"),o={};o.code_inline=function(n,r,i,l,t){const e=n[r];return"<code"+t.renderAttrs(e)+">"+u.escapeHtml(e.content)+"</code>"};o.code_block=function(n,r,i,l,t){const e=n[r];return"<pre"+t.renderAttrs(e)+"><code>"+u.escapeHtml(n[r].content)+`</code></pre>
`};o.fence=function(n,r,i,l,t){const e=n[r],c=e.info?u.unescapeAll(e.info).trim():"";let s="",p="";if(c){const a=c.split(/(\s+)/g);s=a[0],p=a.slice(2).join("")}let f;if(i.highlight?f=i.highlight(e.content,s,p)||u.escapeHtml(e.content):f=u.escapeHtml(e.content),f.indexOf("<pre")===0)return f+`
`;if(c){const a=e.attrIndex("class"),h=e.attrs?e.attrs.slice():[];a<0?h.push(["class",i.langPrefix+s]):(h[a]=h[a].slice(),h[a][1]+=" "+i.langPrefix+s);const g={attrs:h};return`<pre><code${t.renderAttrs(g)}>${f}</code></pre>
`}return`<pre><code${t.renderAttrs(e)}>${f}</code></pre>
`};o.image=function(n,r,i,l,t){const e=n[r];return e.attrs[e.attrIndex("alt")][1]=t.renderInlineAsText(e.children,i,l),t.renderToken(n,r,i)};o.hardbreak=function(n,r,i){return i.xhtmlOut?`<br />
`:`<br>
`};o.softbreak=function(n,r,i){return i.breaks?i.xhtmlOut?`<br />
`:`<br>
`:`
`};o.text=function(n,r){return u.escapeHtml(n[r].content)};o.html_block=function(n,r){return n[r].content};o.html_inline=function(n,r){return n[r].content};function d(){this.rules=u.assign({},o)}d.prototype.renderAttrs=function(r){let i,l,t;if(!r.attrs)return"";for(t="",i=0,l=r.attrs.length;i<l;i++)t+=" "+u.escapeHtml(r.attrs[i][0])+'="'+u.escapeHtml(r.attrs[i][1])+'"';return t};d.prototype.renderToken=function(r,i,l){const t=r[i];let e="";if(t.hidden)return"";t.block&&t.nesting!==-1&&i&&r[i-1].hidden&&(e+=`
`),e+=(t.nesting===-1?"</":"<")+t.tag,e+=this.renderAttrs(t),t.nesting===0&&l.xhtmlOut&&(e+=" /");let c=!1;if(t.block&&(c=!0,t.nesting===1&&i+1<r.length)){const s=r[i+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===t.tag)&&(c=!1)}return e+=c?`>
`:">",e};d.prototype.renderInline=function(n,r,i){let l="";const t=this.rules;for(let e=0,c=n.length;e<c;e++){const s=n[e].type;typeof t[s]<"u"?l+=t[s](n,e,r,i,this):l+=this.renderToken(n,e,r)}return l};d.prototype.renderInlineAsText=function(n,r,i){let l="";for(let t=0,e=n.length;t<e;t++)switch(n[t].type){case"text":l+=n[t].content;break;case"image":l+=this.renderInlineAsText(n[t].children,r,i);break;case"html_inline":case"html_block":l+=n[t].content;break;case"softbreak":case"hardbreak":l+=`
`;break}return l};d.prototype.render=function(n,r,i){let l="";const t=this.rules;for(let e=0,c=n.length;e<c;e++){const s=n[e].type;s==="inline"?l+=this.renderInline(n[e].children,r,i):typeof t[s]<"u"?l+=t[s](n,e,r,i,this):l+=this.renderToken(n,e,r,i)}return l};module.exports=d;
//# sourceMappingURL=renderer.js.map

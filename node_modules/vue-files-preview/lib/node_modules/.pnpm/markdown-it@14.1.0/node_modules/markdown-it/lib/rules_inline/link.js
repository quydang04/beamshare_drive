"use strict";const k=require("../common/utils.js");function b(r,m){let i,s,l,p,f="",d="",c=r.pos,u=!0;if(r.src.charCodeAt(r.pos)!==91)return!1;const A=r.pos,o=r.posMax,h=r.pos+1,n=r.md.helpers.parseLinkLabel(r,r.pos,!0);if(n<0)return!1;let e=n+1;if(e<o&&r.src.charCodeAt(e)===40){for(u=!1,e++;e<o&&(i=r.src.charCodeAt(e),!(!k.isSpace(i)&&i!==10));e++);if(e>=o)return!1;if(c=e,l=r.md.helpers.parseLinkDestination(r.src,e,r.posMax),l.ok){for(f=r.md.normalizeLink(l.str),r.md.validateLink(f)?e=l.pos:f="",c=e;e<o&&(i=r.src.charCodeAt(e),!(!k.isSpace(i)&&i!==10));e++);if(l=r.md.helpers.parseLinkTitle(r.src,e,r.posMax),e<o&&c!==e&&l.ok)for(d=l.str,e=l.pos;e<o&&(i=r.src.charCodeAt(e),!(!k.isSpace(i)&&i!==10));e++);}(e>=o||r.src.charCodeAt(e)!==41)&&(u=!0),e++}if(u){if(typeof r.env.references>"u")return!1;if(e<o&&r.src.charCodeAt(e)===91?(c=e+1,e=r.md.helpers.parseLinkLabel(r,e),e>=0?s=r.src.slice(c,e++):e=n+1):e=n+1,s||(s=r.src.slice(h,n)),p=r.env.references[k.normalizeReference(s)],!p)return r.pos=A,!1;f=p.href,d=p.title}if(!m){r.pos=h,r.posMax=n;const L=r.push("link_open","a",1),x=[["href",f]];L.attrs=x,d&&x.push(["title",d]),r.linkLevel++,r.md.inline.tokenize(r),r.linkLevel--,r.push("link_close","a",-1)}return r.pos=e,r.posMax=o,!0}module.exports=b;
//# sourceMappingURL=link.js.map
